/**
 * Copyright 2026 Martin Doychinov
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

@import "tailwindcss";

@source inline("{,lg:,sm:}{grid-cols-,col-span-}{{1..24..1}}");
@plugin "daisyui";

.checkbox,
.checkbox::before,
.checkbox::after,
.checkbox:checked,
.checkbox:checked::before,
.checkbox:checked::after {
  @apply transition-none animate-none;
}

* {
  font-size: 15px;
  font-family: "Roboto" !important;
}

.table {
  @apply border-r border-gray-300 rounded-none;
  min-width: max-content;
  width: fit-content;
  /*contain: layout paint;*/

  & td, & th {
    @apply border-l border-b border-gray-300 px-[6px] py-[2px] max-w-[3em] align-middle whitespace-nowrap overflow-hidden;

    padding: 4px;

    text-overflow: ellipsis;

    &.hidden {
      @apply hidden;
    }

    & > span.text-right {
      display: block;
    }
  }

  & td:has(input),
  & td:has(select) {
    padding: 0px;

    & label {
      padding: 3px;
    }
  }
}

td > label > .label {
  margin: -2px;
}

.table thead {
  @apply z-10 relative;

  & th {
    @apply overflow-hidden sticky -top-1 border-t border-gray-300 text-center bg-gray-200 text-black;
    font-weight: bold;
    /*font-variant: petite-caps;*/

    & .resize-handle {
      position: absolute;
      top: 0;
      right: 0;
      width: 5px;
      height: 100%;
      cursor: ew-resize;
    }
  }
}

.table tbody tr:hover {
  @apply bg-base-content/5;
}

.table tbody tr:has(> td:first-child input[type="checkbox"]:checked),
.table tbody tr:has(> td:first-child input[type="radio"]:checked) {
  @apply bg-primary-content text-base-content shadow-md;
}

.table tbody tr.t.odd,
.table tbody tr.t.even
{
  @apply sticky top-8 z-9 bg-gray-200 text-black shadow-md font-bold;
}

.table tbody tr.m.odd,
.table tbody tr.m.even
{
  @apply sticky top-16 z-8 bg-primary text-primary-content shadow-md;
}

.app-list .table {
  th, td {
    @apply p-1;
  }
}

.input, .select {
  &:focus, &:focus-within {
    @apply -outline-offset-2 shadow-md;
  }
}

.label {
  &:is(.input > *, .select > *) {
    &:first-child {
      @apply min-w-[10rem] lg:min-w-[8rem] xl:min-w-[10rem];
      @apply max-w-[10rem];
      font-weight: bold;
      overflow: hidden;
      text-overflow: ellipsis;
      display: inline;
    }
  }
}

.label {
  &:is(.input-action > *) {
    &:last-child {
      @apply p-0;
    }
  }
}

.input.number .field-input {
  @apply text-right;
}

.input-compact.number .field-input {
  @apply text-left;
}

.label {
  &:is(.input-compact > *) {
    @apply text-black;

    &:first-child {
      @apply min-w-fit;
    }
  }
}

.select option:not([value]) {
  display: none;
}

/*.field-state-touched {*/
/*    outline-offset: -2px;*/
/*    outline: 1px solid blue;*/
/*}*/

/*.field-state-dirty {*/
/*    outline-offset: -2px;*/
/*    outline: 1px solid green;*/
/*}*/

.field-state-invalid {
  outline-offset: -2px;
  outline: 2px solid red;
}

:disabled {
  cursor: auto;
}

input::-webkit-outer-spin-button,
input::-webkit-inner-spin-button {
  display: none;
  -webkit-appearance: none;
  margin: 0;
}

input[type=number] {
  -moz-appearance: textfield; /* Firefox */
}

/* shared wrapper */
.input-title,
.select-title,
.btn-title {
  position: relative;
  overflow: visible;
  margin-top: 0.35rem;
}

/* label on border */
.input-title .label:first-of-type,
.select-title .label:first-of-type {
  width: auto !important;
  min-width: auto !important;
  max-width: unset !important;
  border-style: none;
  position: absolute;
  top: -0.45rem;
  left: 0.75rem;
  font-size: 0.75rem;
  line-height: 1;
  padding: 0 0.35rem;
  pointer-events: none;
  z-index: 1;
}

.input-title .label:first-of-type::before,
.select-title .label:first-of-type::before {
  content: "";
  position: absolute;
  top: 0.35rem; /* moves the mask slightly above the border */
  left: 0.25rem; /* extend a bit left/right to fully cover border */
  right: 0.25rem;
  height: 0.2rem; /* height enough to cover border line */
  background: white; /* same as input background */
  z-index: -1;
  border-radius: 2px;
}
